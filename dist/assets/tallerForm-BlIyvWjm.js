import{y as A,a4 as M,H as m,D as $,E as q,o as u,c,b as a,w as r,d as i,z as x,s as f,F as E,a as l,V as P,a3 as J,a2 as X}from"./index-CKVviRyN.js";import{B as H}from"./BaseBreadcrumb-gcQlL-7Y.js";import{u as Z}from"./taller-DCbwEk_o.js";import{u as j}from"./resource-D7XqmBUI.js";import{v as h}from"./validateText-UQqnbmko.js";import{V as n,a as S}from"./VRow-DQLErQmL.js";import{V as d}from"./VLabel-BICyz2WR.js";import{V as C}from"./VTextField-59PhmQOV.js";import{V as _}from"./VSelect-WnObaTWA.js";import{V as T}from"./VBtn-DhPqpBlS.js";import"./useRender-CxMoWtCn.js";import"./router-CHyDOejf.js";import"./VCard-BB4O923l.js";import"./VAvatar-zQgJEEQ6.js";import"./transition-BetUbf4_.js";import"./VField-3wwzGXDe.js";import"./index-DPCkpYLO.js";import"./VInput-CqA-TJfG.js";import"./forwardRefs-D3j0TLhE.js";import"./VList-1ZrVAMLh.js";import"./ssrBoot-BN_65rbg.js";import"./VDivider-Ba27QssT.js";import"./dialog-transition-BH5kjBcn.js";import"./VMenu-BCqu2IC3.js";import"./VOverlay-optEPSmR.js";import"./lazy-fDHVWbHZ.js";import"./scopeId-BYaLyses.js";import"./resizeObserver-DwjUkCTp.js";import"./VCheckboxBtn-CoSCxuxx.js";import"./VSelectionControl-CPYHk6CW.js";import"./VChip-Dz9YTfoJ.js";import"./VSlideGroup-536DJn-o.js";import"./group-_LObr9Tv.js";import"./VProgressCircular-DdKZMSYu.js";const G=l("h4",{class:"mb-5 mt-2 font-weight-light"},[l("strong",null," DATOS DEL TALLER:"),i(" Los campos con "),l("span",{style:{color:"red"}},"(*)"),i(" son obligatorios ")],-1),K=l("span",{style:{color:"red"}},"(*)",-1),Q=l("span",{style:{color:"red"}},"(*)",-1),W={key:0,class:"v-messages font-weight-black px-2 py-2"},Y=l("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),ee=[Y],te=l("span",{style:{color:"red"}},"(*)",-1),ae={key:0,class:"v-messages font-weight-black px-2 py-2"},oe=l("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),re=[oe],le=l("span",{style:{color:"red"}},"(*)",-1),ie={key:0,class:"v-messages font-weight-black px-2 py-2"},se=l("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),me=[se],ne={class:"text-lg-left"},Xe=A({__name:"tallerForm",setup(de){JSON.parse(localStorage.getItem("user")||"").id_perfil,JSON.parse(localStorage.getItem("user")||"").id_taller;const v=Z(),k=["PROPIO","EXTERNO"],N=["CEO","DIABLOS VERDES","FELCN"],D=M(),V=j(),B=m({title:"Taller"}),R=m([{text:"Dashboard",disabled:!1,href:"#"},{text:"Informaci칩n del taller",disabled:!0,href:"#"}]),e=$({formData:{id:"",nombre_taller:"",departamento:null,provincia:"",municipio:"",direccion_taller:"",tipo_taller:"",fuerza_taller:"",servicio_taller:null}}),I=m(!1),w=m([]),L=async()=>{w.value=await V.getDepartments()},y=m([]),O=async()=>{y.value=await V.getSerivicio_t()},z=async p=>{const t=await v.taller_id(p);e.formData.id=t.id,e.formData.nombre_taller=t.nombre_taller,e.formData.departamento=t.ciudad,e.formData.direccion_taller=t.direccion,e.formData.municipio=t.municipio,e.formData.provincia=t.provincia,e.formData.tipo_taller=t.tipo,e.formData.fuerza_taller=t.fuerza,e.formData.servicio_taller=t.servicio},b=m(!0),g=async()=>{b.value=!0,(!e.formData.direccion_taller||!e.formData.departamento||!e.formData.tipo_taller)&&(b.value=!1)},U=()=>{J.push({name:"tallerList"})},s=m(!1),F=async()=>{if(s.value=!0,await g(),!b.value)return;const{ok:p,message:t}=D.params.id_taller=="0"?await v.createTaller(e.formData):await v.updateTaller(e.formData),o=p?"success":"error";X.fire({icon:o,title:t,timer:1500,showConfirmButton:!1,timerProgressBar:!0})};return q(async()=>{await L(),await O(),D.params.id_taller!="0"&&(await z(D.params.id_taller),I.value=!0)}),(p,t)=>(u(),c(E,null,[a(H,{title:B.value.title,breadcrumbs:R.value},null,8,["title","breadcrumbs"]),a(S,null,{default:r(()=>[a(n,{cols:"12",lg:"12"},{default:r(()=>[G,a(S,null,{default:r(()=>[a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("Nombre "),K]),_:1}),a(C,{variant:"outlined",color:"primary",type:"text",modelValue:e.formData.nombre_taller,"onUpdate:modelValue":t[0]||(t[0]=o=>e.formData.nombre_taller=o),modelModifiers:{trim:!0},onInput:t[1]||(t[1]=o=>(g(),e.formData.nombre_taller=x(h)(e.formData.nombre_taller.toUpperCase()))),error:s.value&&!e.formData.nombre_taller,"hide-details":""},null,8,["modelValue","error"])]),_:1}),a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("Departamento "),Q]),_:1}),a(_,{modelValue:e.formData.departamento,"onUpdate:modelValue":t[2]||(t[2]=o=>e.formData.departamento=o),items:w.value,"item-title":"nombre_region","item-value":"nombre_region",error:s.value&&!e.formData.departamento},null,8,["modelValue","items","error"]),s.value&&!e.formData.departamento?(u(),c("div",W,ee)):f("",!0)]),_:1}),a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("Direcci칩n "),te]),_:1}),a(C,{variant:"outlined",color:"primary",type:"text",modelValue:e.formData.direccion_taller,"onUpdate:modelValue":t[3]||(t[3]=o=>e.formData.direccion_taller=o),modelModifiers:{trim:!0},onInput:t[4]||(t[4]=o=>(g(),e.formData.direccion_taller=x(h)(e.formData.direccion_taller.toUpperCase()))),error:s.value&&!e.formData.direccion_taller,"hide-details":""},null,8,["modelValue","error"]),s.value&&!e.formData.direccion_taller?(u(),c("div",ae,re)):f("",!0)]),_:1}),a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("Tipo "),le]),_:1}),a(_,{modelValue:e.formData.tipo_taller,"onUpdate:modelValue":t[5]||(t[5]=o=>e.formData.tipo_taller=o),items:k,"item-title":"nombre_region","item-value":"nombre_region",error:s.value&&!e.formData.tipo_taller},null,8,["modelValue","error"]),s.value&&!e.formData.tipo_taller?(u(),c("div",ie,me)):f("",!0)]),_:1}),e.formData.tipo_taller!=""&&e.formData.tipo_taller=="EXTERNO"?(u(),c(E,{key:0},[a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("FUERZA")]),_:1}),a(_,{items:N,"item-title":"nombre_fuerza","item-value":"nombre_fuerza","no-data-text":"No existe m치s opciones para seleccionar",modelValue:e.formData.fuerza_taller,"onUpdate:modelValue":t[6]||(t[6]=o=>e.formData.fuerza_taller=o),clearable:""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"6"},{default:r(()=>[a(d,{class:"mb-2 font-weight-medium"},{default:r(()=>[i("SERVICIO ")]),_:1}),a(_,{items:y.value,"item-title":"nombre_servicio","item-value":"nombre_servicio","no-data-text":"No existe m치s opciones para seleccionar",modelValue:e.formData.servicio_taller,"onUpdate:modelValue":t[7]||(t[7]=o=>e.formData.servicio_taller=o),clearable:""},null,8,["items","modelValue"])]),_:1})],64)):f("",!0)]),_:1}),l("p",ne,[a(T,{color:"error",class:"mr-3",onClick:t[8]||(t[8]=o=>U())},{default:r(()=>[i("Cancelar")]),_:1}),a(T,{color:"primary",onClick:t[9]||(t[9]=P(o=>F(),["prevent"]))},{default:r(()=>[i("Enviar")]),_:1})])]),_:1})]),_:1})],64))}});export{Xe as default};
