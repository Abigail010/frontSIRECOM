import{y as le,H as m,a4 as ie,D as me,a2 as L,E as ne,o as d,c as p,b as a,w as r,d as l,z as _,s as f,a as s,F as h,k as N,a3 as O}from"./index-CGzb33IU.js";import"./resource-9C79bcwL.js";import{u as de}from"./vehicle-DbslTHpn.js";import{u as ue}from"./orden-DLhawyaC.js";import{v}from"./validateText-UQqnbmko.js";import"./filtro-Bqwcr2mG.js";import{B as ce}from"./BaseBreadcrumb-9sZRzBR9.js";import{u as pe}from"./busqueda-D8nFe3sc.js";import{V as n,a as V}from"./VRow-zJLVNwpE.js";import{V as fe,a as j,b as G,c as H}from"./VExpansionPanel-D8t-BBy5.js";import{V as c}from"./VLabel-GLYsymE2.js";import{V as b}from"./VTextField-B7phlykx.js";import{V as B}from"./VTextarea-BaXxdDGC.js";import{V as D}from"./VAutocomplete-DC9fFK9H.js";import{V as _e}from"./VSelect-DuHC03et.js";import{V as x}from"./VBtn-CVu2v1l5.js";import{V as ve}from"./VProgressCircular-De9eerNs.js";import"./useRender-CqBomNwa.js";import"./router-C8F8dwVc.js";import"./VCard-DzRJUKQr.js";import"./VAvatar-C7IuYauh.js";import"./transition-BDKWow2I.js";import"./group-zqW-UR9a.js";import"./index-B4f7P2zL.js";import"./lazy-XI759dvc.js";import"./VField-Dvsp7bMV.js";import"./VInput-BEE2_9XG.js";import"./forwardRefs-D3j0TLhE.js";import"./filter-JH3jnHlH.js";import"./VList-DMFEH9ux.js";import"./ssrBoot-rexFTabn.js";import"./VDivider-JXSXwml9.js";import"./VMenu-BiDJTElT.js";import"./VOverlay-vDAHeUVM.js";import"./scopeId-CpdZsxqD.js";import"./dialog-transition-CGoIyN8o.js";import"./VCheckboxBtn-BaPxwzgh.js";import"./VSelectionControl-DZpy15LN.js";import"./VChip-DU3DipfD.js";import"./VSlideGroup-FIE4V-cH.js";import"./resizeObserver-CU9npVqN.js";const De=s("h4",{class:"mb-5 mt-2 font-weight-light"},[s("b",null," REGISTRO DEL VEHÍCULO: "),l(" Todos los campos con "),s("span",{style:{color:"red"}},"(*)"),l("son obligatorios ")],-1),ge=s("span",{style:{color:"red"}},"(*)",-1),be={key:0,class:"v-messages font-weight-black px-2 py-2"},Ve=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),ye=[Ve],he=s("span",{style:{color:"red"}},"(*)",-1),xe={key:0,class:"v-messages font-weight-black px-2 py-2"},we=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),ke=[we],Ee=s("span",{style:{color:"red"}}," (*)",-1),Ue={key:0,class:"v-messages font-weight-black px-2 py-2"},Ce=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Ie=[Ce],Ne=s("span",{style:{color:"red"}},"(*)",-1),Be={key:0,class:"v-messages font-weight-black px-2 py-2"},Me=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Se=[Me],Te=s("span",{style:{color:"red"}},"(*)",-1),ze={key:0,class:"v-messages font-weight-black px-2 py-2"},Pe=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),qe=[Pe],$e=s("span",{style:{color:"red"}},"(*)",-1),Ae={key:0,class:"v-messages font-weight-black px-2 py-2"},Re=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Fe=[Re],Le=s("span",{style:{color:"red"}},"(*)",-1),Oe={key:0,class:"v-messages font-weight-black px-2 py-2"},je=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Ge=[je],He=s("span",{style:{color:"red"}},"(*)",-1),Je={key:0,class:"v-messages font-weight-black px-2 py-2"},Ke=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Qe=[Ke],We=s("span",{style:{color:"red"}},"(*)",-1),Xe={key:0,class:"v-messages font-weight-black px-2 py-2"},Ye=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),Ze=[Ye],eo=s("span",{style:{color:"red"}},"(*)",-1),oo={key:0,class:"v-messages font-weight-black ml-3 mt-2"},ao=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),to=[ao],ro=s("span",{style:{color:"red"}},"(*)",-1),so={key:0,class:"v-messages font-weight-black ml-3 mt-2"},lo=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),io=[lo],mo=s("span",{style:{color:"red"}},"*",-1),no={key:0,class:"v-messages font-weight-black ml-3 mt-2"},uo=s("div",{class:"v-messages__message text-error"}," El campo es requerido ",-1),co=[uo],oa=le({__name:"vehiculoForm",setup(po){const J=pe(),M=m([0]),w=de(),g=ie();ue();const K=["GASOLINA","DIESEL","KEROSENE"],i=m(!1),k=m(!0);m(!1);const E=m(!1),Q=JSON.parse(localStorage.getItem("user")||"").nombre_perfil,W=m({title:"Registro del vehículo"}),X=m([{text:"Dashboard",disabled:!1,href:"/home"},{text:"Vehículos",disabled:!0,href:"#"}]),Y=m(!0),S=m(!1),e=me({formData:{id_orden:"",placa_chasis:"",nombre_taller:"",placa:"",chasis:"",marca:"",modelo:"",motor:"",anio_fabri:"",color_ve:"",placas:"",chasis_:"",kilometraje:"",nro_ocupantes:"",combustible:"",fuerza_orden:"",tipo_orden:"",id_vehiculo:"",clase:"",modelo_año:"",departamento:"",provincia:"",municipio:"",fuerza:"",procedencia:"",grupo:"",anio_baja:"",componente:"",comparar_:"",kilo_:"",valido_kilo:"",estado_orden:""}}),y=m([]),U=m([]),T=m([]),C=m([]),z=m([]),P=m([]),q=m([]),$=m([]),A=m([]);m([]);const Z=m([]),ee=async()=>{const u=await J.general_data_for_search();z.value=u.clase,P.value=u.tipo,q.value=u.marca,$.value=u.fuerza,A.value=u.procedencia,Z.value=u.departamento,y.value=u.place,U.value=y.value.filter(o=>o.tipo=="DEPARTAMENTO")},oe=async u=>{let o=U.value.find(t=>t.nombre_region==u);C.value=y.value.filter(t=>t.tipo=="PROVINCIA"&&t.padre==o.id)},ae=async u=>{let o=C.value.find(t=>t.nombre_region==u);T.value=y.value.filter(t=>t.tipo=="MUNICIPIO"&&t.padre==o.id)},te=async u=>{const o=await w.getIDv(u);e.formData.id_vehiculo=o.id_v,e.formData.chasis_=o.chasis,e.formData.placas=o.placa,e.formData.nro_ocupantes=o.nro_ocupantes,e.formData.motor=o.motor,e.formData.marca=o.id_marca,e.formData.modelo=o.tipo1,e.formData.color_ve=o.color,e.formData.combustible=o.combustible,e.formData.tipo_orden=o.id_clase,e.formData.anio_fabri=o.anio_registro,e.formData.anio_baja=o.anio_baja,e.formData.departamento=o.departamento,e.formData.municipio=o.municipio,e.formData.provincia=o.provincia,e.formData.fuerza=o.id_fuerza,e.formData.grupo=o.grupo,e.formData.procedencia=o.id_procedencia,e.formData.componente=o.componente,S.value=!1,e.formData.comparar_=o.total,e.formData.kilo_=o.kilo_rem,e.formData.estado_orden=o.estado;let I=(parseInt(e.formData.comparar_)+1)*parseInt(e.formData.kilo_);e.formData.valido_kilo=String(I)},re=()=>{O.push({name:"VehiculoList"})},R=async()=>{if(i.value=!0,await se(),!!k.value){if(E.value=!0,g.params.id_v=="0")L.fire({title:"¿Estás seguro?",text:"Verifica que la información registrada sea correcta",icon:"warning",showCancelButton:!0,cancelButtonColor:"#FA896B",confirmButtonColor:"#5D87FF",cancelButtonText:"No, volver",confirmButtonText:"Si, enviar formulario"}).then(async u=>{if(u.isConfirmed){const{ok:o,message:t}=await w.createVehicle(e.formData),I=o?"success":"error";F.fire({icon:I,title:t})}});else if(Y.value){const{ok:u,message:o}=await w.updateVehicle(e.formData),t=u?"success":"error";F.fire({icon:t,title:o})}else O.push({name:"vehiculoList"});E.value=!1}},se=async()=>{k.value=!0,(!e.formData.placas||!e.formData.chasis_||!e.formData.color_ve||!e.formData.combustible||!e.formData.tipo_orden||!e.formData.fuerza||!e.formData.marca||!e.formData.nro_ocupantes||!e.formData.motor||!e.formData.combustible||!e.formData.procedencia||!e.formData.tipo_orden||!e.formData.modelo)&&(k.value=!1)},F=L.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:2e3,timerProgressBar:!0});return ne(async()=>{await ee(),g.params.id_v!="0"&&(await te(g.params.id_v),S.value=!0)}),(u,o)=>(d(),p(h,null,[a(ce,{title:W.value.title,breadcrumbs:X.value},null,8,["title","breadcrumbs"]),a(V,null,{default:r(()=>[a(n,{cols:"12",lg:"12"},{default:r(()=>[De]),_:1})]),_:1}),a(V,null,{default:r(()=>[a(fe,{modelValue:M.value,"onUpdate:modelValue":o[28]||(o[28]=t=>M.value=t)},{default:r(()=>[a(j,{elevation:"10"},{default:r(()=>[a(G,{class:"text-h6"},{default:r(()=>[l("Caracteristicas del vehículo")]),_:1}),a(H,{class:"mt-4"},{default:r(()=>[a(V,null,{default:r(()=>[a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Placa "),ge]),_:1}),a(b,{variant:"outlined",color:"primary",modelValue:e.formData.placas,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formData.placas=t),modelModifiers:{trim:!0},onInput:o[1]||(o[1]=t=>e.formData.placas=_(v)(e.formData.placas.toUpperCase())),error:i.value&&!e.formData.placas,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.placas?(d(),p("div",be,ye)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Chasis "),he]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.chasis_,"onUpdate:modelValue":o[2]||(o[2]=t=>e.formData.chasis_=t),modelModifiers:{trim:!0},onInput:o[3]||(o[3]=t=>e.formData.chasis_=_(v)(e.formData.chasis_.toUpperCase())),error:i.value&&!e.formData.chasis_,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.placas?(d(),p("div",xe,ke)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Tipo "),Ee]),_:1}),a(D,{variant:"outlined",color:"primary",items:z.value,modelValue:e.formData.tipo_orden,"onUpdate:modelValue":o[4]||(o[4]=t=>e.formData.tipo_orden=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_clase","item-title":"nombre_clase",error:i.value&&!e.formData.tipo_orden},null,8,["items","modelValue","error"]),i.value&&!e.formData.tipo_orden?(d(),p("div",Ue,Ie)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Marca"),Ne]),_:1}),a(D,{variant:"outlined",color:"primary",items:q.value,modelValue:e.formData.marca,"onUpdate:modelValue":o[5]||(o[5]=t=>e.formData.marca=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_marca","item-title":"nombre_marca",error:i.value&&!e.formData.marca},null,8,["items","modelValue","error"]),i.value&&!e.formData.marca?(d(),p("div",Be,Se)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Modelo"),Te]),_:1}),a(D,{variant:"outlined",color:"primary",items:P.value,modelValue:e.formData.modelo,"onUpdate:modelValue":o[6]||(o[6]=t=>e.formData.modelo=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_tipo","item-title":"nombre_tipo",error:i.value&&!e.formData.modelo},null,8,["items","modelValue","error"]),i.value&&!e.formData.modelo?(d(),p("div",ze,qe)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Color"),$e]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.color_ve,"onUpdate:modelValue":o[7]||(o[7]=t=>e.formData.color_ve=t),modelModifiers:{trim:!0},onInput:o[8]||(o[8]=t=>e.formData.color_ve=_(v)(e.formData.color_ve.toUpperCase())),error:i.value&&!e.formData.color_ve,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.color_ve?(d(),p("div",Ae,Fe)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Motor "),Le]),_:1}),a(B,{rows:"1","auto-grow":"",modelValue:e.formData.motor,"onUpdate:modelValue":o[9]||(o[9]=t=>e.formData.motor=t),modelModifiers:{trim:!0},onInput:o[10]||(o[10]=t=>e.formData.motor=_(v)(e.formData.motor.toUpperCase())),error:i.value&&!e.formData.motor,"hide-details":""},null,8,["modelValue","error"]),i.value&&!e.formData.motor?(d(),p("div",Oe,Ge)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("N° de ocupantes "),He]),_:1}),a(b,{variant:"outlined",color:"primary",type:"number",min:"1",modelValue:e.formData.nro_ocupantes,"onUpdate:modelValue":o[11]||(o[11]=t=>e.formData.nro_ocupantes=t),modelModifiers:{trim:!0},onInput:e.formData.nro_ocupantes,"hide-details":"",error:i.value&&!e.formData.nro_ocupantes},null,8,["modelValue","onInput","error"]),i.value&&!e.formData.nro_ocupantes?(d(),p("div",Je,Qe)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Tipo de combustible"),We]),_:1}),s("div",null,[a(_e,{modelValue:e.formData.combustible,"onUpdate:modelValue":o[12]||(o[12]=t=>e.formData.combustible=t),items:K,"item-title":"nombre_region","item-value":"nombre_region",error:i.value&&!e.formData.combustible},null,8,["modelValue","error"]),i.value&&!e.formData.combustible?(d(),p("div",Xe,Ze)):f("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),a(j,{elevation:"10",class:"mt-3"},{default:r(()=>[a(G,{class:"text-h6",style:{color:"black"}},{default:r(()=>[l("Información del vehículo")]),_:1}),a(H,{class:"mt-4"},{default:r(()=>[a(V,null,{default:r(()=>[a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Grupo")]),_:1}),a(b,{variant:"outlined",color:"primary",modelValue:e.formData.grupo,"onUpdate:modelValue":o[13]||(o[13]=t=>e.formData.grupo=t),modelModifiers:{trim:!0},onInput:o[14]||(o[14]=t=>e.formData.grupo=_(v)(e.formData.grupo.toUpperCase())),"hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Fuerza"),eo]),_:1}),a(D,{variant:"outlined",color:"primary",items:$.value,modelValue:e.formData.fuerza,"onUpdate:modelValue":o[15]||(o[15]=t=>e.formData.fuerza=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_fuerza","item-title":"nombre_fuerza",error:i.value&&!e.formData.fuerza},null,8,["items","modelValue","error"]),i.value&&!e.formData.fuerza?(d(),p("div",oo,to)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Procedencia"),ro]),_:1}),a(D,{variant:"outlined",color:"primary",items:A.value,modelValue:e.formData.procedencia,"onUpdate:modelValue":o[16]||(o[16]=t=>e.formData.procedencia=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"id_procedencia","item-title":"nombre_procedencia",error:i.value&&!e.formData.procedencia},null,8,["items","modelValue","error"]),i.value&&!e.formData.procedencia?(d(),p("div",so,io)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Departamento "),mo]),_:1}),a(D,{variant:"outlined",color:"primary",items:U.value,modelValue:e.formData.departamento,"onUpdate:modelValue":[o[17]||(o[17]=t=>e.formData.departamento=t),o[18]||(o[18]=t=>{oe(e.formData.departamento)})],"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region",error:i.value&&!e.formData.departamento},null,8,["items","modelValue","error"]),i.value&&!e.formData.departamento?(d(),p("div",no,co)):f("",!0)]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Provincia ")]),_:1}),a(D,{variant:"outlined",color:"primary",items:C.value,modelValue:e.formData.provincia,"onUpdate:modelValue":[o[19]||(o[19]=t=>e.formData.provincia=t),o[20]||(o[20]=t=>{ae(e.formData.provincia)})],"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region"},null,8,["items","modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l(" Municipio ")]),_:1}),a(D,{variant:"outlined",color:"primary",items:T.value,modelValue:e.formData.municipio,"onUpdate:modelValue":o[21]||(o[21]=t=>e.formData.municipio=t),"no-data-text":"No existe más opciones para seleccionar","item-value":"nombre_region","item-title":"nombre_region"},null,8,["items","modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Año de Ingreso")]),_:1}),a(b,{variant:"outlined",color:"primary",modelValue:e.formData.anio_fabri,"onUpdate:modelValue":o[22]||(o[22]=t=>e.formData.anio_fabri=t),modelModifiers:{trim:!0},onInput:o[23]||(o[23]=t=>e.formData.anio_fabri=_(v)(e.formData.anio_fabri.toUpperCase())),min:"1980",type:"number","hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Año de Baja")]),_:1}),a(b,{variant:"outlined",color:"primary",modelValue:e.formData.anio_baja,"onUpdate:modelValue":o[24]||(o[24]=t=>e.formData.anio_baja=t),modelModifiers:{trim:!0},onInput:o[25]||(o[25]=t=>e.formData.anio_baja=_(v)(e.formData.anio_baja.toUpperCase())),min:"1980",type:"number","hide-details":""},null,8,["modelValue"])]),_:1}),a(n,{cols:"12",md:"4"},{default:r(()=>[a(c,{class:"mb-2 font-weight-medium"},{default:r(()=>[l("Componente ")]),_:1}),a(b,{variant:"outlined",color:"primary",modelValue:e.formData.componente,"onUpdate:modelValue":o[26]||(o[26]=t=>e.formData.componente=t),modelModifiers:{trim:!0},onInput:o[27]||(o[27]=t=>e.formData.componente=_(v)(e.formData.componente.toUpperCase())),"hide-details":""},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(V,null,{default:r(()=>[a(n,{cols:"12",class:"text-lg-left pt-5"},{default:r(()=>[E.value?(d(),N(x,{key:1,color:"primary",disabled:""},{default:r(()=>[a(ve,{indeterminate:"",color:"white",class:"mr-2"}),l(" Enviando... ")]),_:1})):(d(),p(h,{key:0},[a(x,{color:"error",class:"mr-3",onClick:o[29]||(o[29]=t=>re())},{default:r(()=>[l("Volver")]),_:1}),_(g).params.id_v=="0"?(d(),N(x,{key:0,color:"primary",onClick:o[30]||(o[30]=t=>R())},{default:r(()=>[_(g).params.id_v=="0"?(d(),p(h,{key:0},[l(" Enviar ")],64)):f("",!0)]),_:1})):f("",!0),_(g).params.id_v!="0"?(d(),N(x,{key:1,color:"primary",onClick:o[31]||(o[31]=t=>R())},{default:r(()=>[_(g).params.id_v!="0"||_(Q).includes("SUPER ADMINISTRADOR")?(d(),p(h,{key:0},[l(" Actualizar ")],64)):f("",!0)]),_:1})):f("",!0)],64))]),_:1})]),_:1})],64))}});export{oa as default};
