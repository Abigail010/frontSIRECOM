import{a5 as $,b3 as A,c3 as N,E as T,U as C,H as y,o as l,c,b as s,w as e,a as o,v as z,d as f,F as g,x as b,k as u,t as d,z as m,b4 as E,r as w,be as F}from"./index-DeSAH9ni.js";import{V as U}from"./VTextField-yy1SgSiM.js";import{V as R}from"./VMenu-DyRGNjI5.js";import{V as j}from"./VBtn-NJ6eX_UG.js";import{e as V,a as S,c as k}from"./VList-kMK4JTiB.js";import{V as v}from"./VSheet-CYYMhZR1.js";import{V as L}from"./VAvatar-CHhwnsRI.js";import{V as P}from"./VBadge-BV47hma4.js";import{f as q}from"./index-VyA0mdcS.js";const G=$({id:"chat",state:()=>({chats:[],chatContent:1}),getters:{},actions:{async fetchChats(){try{const a=await A.get("/api/data/chat/ChatData");this.chats=a.data}catch(a){alert(a),console.log(a)}},SelectChat(a){this.chatContent=a},sendMsg(a,r){const h={id:a,msg:r,type:"text",attachments:[],createdAt:N(new Date,{seconds:1}),senderId:a};this.chats=this.chats.filter(n=>n.id===a?{...n,...n.chatHistory.push(h)}:n)}}}),J={class:"px-6 pt-3"},K=["src"],O=o("small",{class:"textPrimary text-subtitle-2"},"Sent a Photo",-1),Q={key:1,class:"text-subtitle-2 textPrimary mt-1 text-truncate w-100"},W={class:"d-flex flex-column text-right w-25"},X={class:"textPrimary text-subtitle-2"},Y={__name:"ChatListing",setup(a){const r=G();T(()=>{r.fetchChats()});const n=C(()=>r.chats),_=y(""),B=C(()=>n.value.filter(i=>i.name.toLowerCase().includes(_.value.toLowerCase()))),D=i=>E.last(i.chatHistory).createdAt,H=y([{title:"Sort by time"},{title:"Sort by Unread"},{title:"Mark all as read"}]);return(i,x)=>{const I=w("ChevronDownIcon"),M=w("perfect-scrollbar");return l(),c(g,null,[s(v,null,{default:e(()=>[o("div",J,[s(U,{variant:"outlined",modelValue:_.value,"onUpdate:modelValue":x[0]||(x[0]=t=>_.value=t),"append-inner-icon":"mdi-magnify",placeholder:"Search Contact","hide-details":"",density:"compact"},null,8,["modelValue"]),s(R,null,{activator:e(({props:t})=>[s(j,z({color:"white",variant:"flat",class:"mt-4 text-medium-emphasis"},t),{default:e(()=>[f("Recent Chats "),s(I,{size:"18",class:"ml-2"})]),_:2},1040)]),default:e(()=>[s(V,{class:"elevation-10"},{default:e(()=>[(l(!0),c(g,null,b(H.value,(t,p)=>(l(),u(k,{key:p,value:p},{default:e(()=>[s(S,null,{default:e(()=>[f(d(t.title),1)]),_:2},1024)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})])]),_:1}),s(M,{class:"lgScroll chatlist"},{default:e(()=>[s(V,null,{default:e(()=>[(l(!0),c(g,null,b(B.value,t=>(l(),u(k,{value:t.id,color:"primary",class:"text-no-wrap chatItem",key:t.id,lines:"two",active:m(r).chatContent===t.id,onClick:p=>m(r).SelectChat(t.id)},{prepend:e(()=>[s(L,null,{default:e(()=>[o("img",{src:t.thumb,alt:"pro",width:"50"},null,8,K)]),_:2},1024),s(P,{inline:"",class:"badg-dot",dot:"",color:t.status==="away"?"warning":t.status==="busy"?"error":t.status==="online"?"success":"containerBg"},null,8,["color"])]),append:e(()=>[o("div",W,[o("small",X,d(m(q)(new Date(D(t)),{addSuffix:!1})),1)])]),default:e(()=>[s(S,{class:"text-subtitle-1 textPrimary w-100 font-weight-semibold"},{default:e(()=>[f(d(t.name),1)]),_:2},1024),t.chatHistory.slice(-1)[0].type=="img"?(l(),u(v,{key:0},{default:e(()=>[O]),_:1})):(l(),c("div",Q,d(t.chatHistory.slice(-1)[0].msg),1))]),_:2},1032,["value","active","onClick"]))),128))]),_:1})]),_:1})],64)}}},mt=Y,Z={class:"d-flex gap-2 align-center pa-6"},tt=["src"],et=o("div",null,[o("h5",{class:"text-subtitle-1 font-weight-semibold"},"pruebba"),o("h6",{class:"text-subtitle-2"},"Designer")],-1),st={__name:"ChatProfile",setup(a){return(r,h)=>(l(),u(v,null,{default:e(()=>[o("div",Z,[s(L,{size:"large"},{default:e(()=>[o("img",{src:m(F),alt:"pro",width:"54"},null,8,tt)]),_:1}),s(P,{class:"badg-dotDetail",dot:"",color:"success"}),et])]),_:1}))}},ht=st;export{ht as C,mt as a,G as u};
